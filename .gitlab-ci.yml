scan-build:
  script:
  - premake5 --cc=gcc gmake
  - export CC=clang
  - export CXX=clang++
  - scan-build --status-bugs make -j $[$(grep -c ^processor /proc/cpuinfo)*2] config=debug CC=clang CXX=clang++
  tags:
  - cpp

gcc-debug-build:
  script:
  - premake5 --cc=gcc gmake
  - export CC=gcc
  - export CXX=g++
  - make -j $[$(grep -c ^processor /proc/cpuinfo)*2] config=debug CC=gcc CXX=g++
  - multicore_engine_core_tests/build/bin/multicore_engine_core_tests-gcc-debug --report_level=short
  tags:
  - cpp

gcc-release-build:
  script:
  - premake5 --cc=gcc gmake
  - export CC=gcc
  - export CXX=g++
  - make -j $[$(grep -c ^processor /proc/cpuinfo)*2] config=release CC=gcc CXX=g++
  - multicore_engine_core_tests/build/bin/multicore_engine_core_tests-gcc-release --report_level=short
  tags:
  - cpp

clang-debug-build:
  script:
  - premake5 --cc=clang gmake
  - export CC=clang
  - export CXX=clang++
  - make -j $[$(grep -c ^processor /proc/cpuinfo)*2] config=debug CC=clang CXX=clang++
  - multicore_engine_core_tests/build/bin/multicore_engine_core_tests-clang-debug --report_level=short
  tags:
  - cpp

clang-release-build:
  script:
  - premake5 --cc=clang gmake
  - export CC=clang
  - export CXX=clang++
  - make -j $[$(grep -c ^processor /proc/cpuinfo)*2] config=release CC=clang CXX=clang++
  - multicore_engine_core_tests/build/bin/multicore_engine_core_tests-clang-release --report_level=short
  tags:
  - cpp

api-doc:
  script:
  - doxygen Doxyfile
  - cd doc\latex
  - pdflatex refman.tex > refman.1.log
  - bibtex refman > refman.2.log
  - makeindex refman > refman.3.log
  - pdflatex refman.tex > refman.4.log
  - pdflatex refman.tex > refman.5.log
  - mv refman.pdf ..
  tags:
  - latex

