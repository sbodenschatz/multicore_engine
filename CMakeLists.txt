cmake_minimum_required (VERSION 2.6)
project (multicore_engine)

set(CMAKE_CONFIGURATION_TYPES "Debug;Release")

MESSAGE(STATUS "Compiler ID: " ${CMAKE_CXX_COMPILER_ID})
if (${CMAKE_CXX_COMPILER_ID} MATCHES "Clang")
	set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -Wextra -Werror")
	set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -stdlib=libc++ -Wall -Wextra -Werror -std=c++14")
	MESSAGE(STATUS "Clang C_FLAGS: " ${CMAKE_C_FLAGS})
	MESSAGE(STATUS "Clang CXX_FLAGS: " ${CMAKE_CXX_FLAGS})
endif ()
if (${CMAKE_CXX_COMPILER_ID} MATCHES "GNU")
	set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -Wextra -Werror")
	set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Wextra -Werror -std=c++14")
	MESSAGE(STATUS "GNU C_FLAGS: " ${CMAKE_C_FLAGS})
	MESSAGE(STATUS "GNU CXX_FLAGS: " ${CMAKE_CXX_FLAGS})
endif ()
if (MSVC)
	set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} /W4 /WX /MP")
	set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /W4 /WX /MP")
	set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /Ob2 /GL")
	set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} /WX /ignore:4221")
	set(CMAKE_STATIC_LINKER_FLAGS "${CMAKE_STATIC_LINKER_FLAGS} /WX /ignore:4221")
	set(CMAKE_EXE_LINKER_FLAGS_RELEASE "${CMAKE_EXE_LINKER_FLAGS_RELEASE} /LTCG /INCREMENTAL:NO /OPT:REF")
	set(CMAKE_STATIC_LINKER_FLAGS_RELEASE "${CMAKE_STATIC_LINKER_FLAGS_RELEASE} /LTCG")
	add_definitions(-DGLM_FORCE_CXX11)
	MESSAGE(STATUS "MSVC C_FLAGS: " ${CMAKE_C_FLAGS})
	MESSAGE(STATUS "MSVC CXX_FLAGS: " ${CMAKE_CXX_FLAGS})
endif ()

add_definitions(-DGLM_FORCE_RADIANS -DGLM_SWIZZLE -DGLM_FORCE_SIZE_T_LENGTH -DZLIB_CONST)
include_directories(${CMAKE_SOURCE_DIR}/multicore_engine_core/include)
include_directories(${CMAKE_SOURCE_DIR}/multicore_engine_parsers/include)

if (CMAKE_BUILD_TYPE STREQUAL Debug)
	add_definitions(-DDEBUG)
else ()
	add_definitions(-DNDEBUG)	
endif()

if (WIN32)
	include_directories(SYSTEM C:/Libs/Boost/include)
	include_directories(SYSTEM C:/Libs/glm/include)
	include_directories(SYSTEM C:/Libs/zlib/include)
	add_definitions(-DMULTICORE_ENGINE_WINDOWS) 
	#Windos 7 and higher:
	add_definitions(-D_WIN32_WINNT=0x0601)
	add_definitions(-DWINVER=0x0601)
	if(MINGW)
		if(CMAKE_BUILD_TYPE STREQUAL Debug)
			link_directories(C:/Libs/Boost/lib_x64_mingw_debug)
			link_directories(C:/Libs/zlib/lib_x64_mingw_debug)
		elseif(CMAKE_BUILD_TYPE STREQUAL Release)
			link_directories(C:/Libs/Boost/lib_x64_mingw_release)
			link_directories(C:/Libs/zlib/lib_x64_mingw_release)
		endif()
	elseif(MSVC)
		link_directories(C:/Libs/Boost/lib_x64_vc)
		link_directories(C:/Libs/zlib/lib_x64_vc)
		link_libraries(debug zlibstaticd)
		link_libraries(optimized zlibstatic)
	endif()
endif()

add_subdirectory(multicore_engine_parsers)
add_subdirectory(multicore_engine_core)
add_subdirectory(multicore_engine_core_tests)
add_subdirectory(multicore_engine_demo)
add_subdirectory(multicore_engine_load_unit_gen)
add_subdirectory(multicore_engine_pack_file_gen)
